$button-themes: $theme-colors;

$button-font-weight: font-weight(medium) !default;
$button-text-color: $dark !default;
$button-background-color: $white;

$button-border-style: solid;
$button-border-width: 1px;
$button-border-color: gray(300);

$button-transition: $transition;

$button-hovered-color: primary-color(0);
$button-hovered-border-color: primary-color(0);

$button-focused-color: primary-color(-20);
$button-focused-border-color: primary-color(-20);

$button-active-color: primary-color(40);
$button-active-border-color: primary-color(40);

$button-disabled-opacity: 0.5 !default;

$button-clear-text-color: primary-color(0) !default;
$button-clear-hovered-text-color: primary-color(20) !default;

$button-padding-y: 0.7em;
$button-padding-x: 1.2em;
$button-padding: $button-padding-y $button-padding-x;
$button-paddings: () !default;
$button-paddings: map-merge((
	x-small: ($button-padding-y * .5) ($button-padding-x * .5),
	small: ($button-padding-y * .75) ($button-padding-x * .75),
	base: $button-padding,
	large: ($button-padding-y * 1.25) ($button-padding-x * 1.25),
	x-large: ($button-padding-y * 1.5) ($button-padding-x * 1.5)
), $button-paddings);

.button {
	position: relative;
	font-weight: $button-font-weight;
	padding: $button-padding;
	background-color: $button-background-color;
	border-style: $button-border-style;
	border-width: $button-border-width;
	border-color: $button-border-color;
	border-radius: $border-radius;
	transition: $button-transition;
	color: $button-text-color;
	text-align: center;
	white-space: nowrap;
	vertical-align: middle;
	outline: none;
	cursor: pointer;
	
	&:hover:not(:disabled),
	&--hovered:not(:disabled) {
		color: $button-hovered-color;
		border-color: $button-hovered-border-color;
		outline: none;
	}
	
	&:focus:not(:disabled):not(.button--clear),
	&--focused:not(:disabled):not(.button--clear) {
		color: $button-focused-color;
		border-color: $button-focused-border-color;
		box-shadow: 0 0 0.3em 0.2em rgba(tint($primary-color, 15%), 0.3);
		outline: none;
	}
	
	&:active:not(:disabled),
	&--active:not(:disabled) {
		color: $button-active-color;
		border-color: $button-active-border-color;
		outline: none;
	}

	&:disabled,
	&--disabled {
		opacity: $button-disabled-opacity;
		cursor: not-allowed;
	}

	//	Theme modifier classes
	@each $theme, $color in $button-themes {
		&--#{$theme} {	
			background-color: $color;
			color: color-yiq($color);
			border-color: $color;

			&:hover:not(:disabled),
			&.button--hovered:not(:disabled) {
				color: color-yiq($color);
				background-color: tint($color, 20%);
				border-color: tint($color, 20%);
			}
			
			&:focus:not(:disabled):not(.button--clear),
			&.button--focused:not(:disabled) {
				color: color-yiq($color);
				background-color: tint($color, 20%);
				border-color: tint($color, 20%);
				box-shadow: 0 0 0.3em 0.2em rgba($color, 0.3);
			}
			
			&:active:not(:disabled):not(.button--clear),
			&.button--active:not(:disabled) {
				color: color-yiq($color);
				background-color: shade($color, 20%);
				border-color: shade($color, 20%);
			}

			&.button--raised {
				&:not(:disabled) {
					border-bottom-width: 2px;
					border-bottom-color: shade($color, 10%);
				}
				
				&:hover:not(:disabled),
				&.button--hovered:not(:disabled) {
					border-bottom-width: 4px;
					border-bottom-color: $color;
					margin-top: -2px;
				}

				&:focus:not(:disabled),
				&.button--focus:not(:disabled) {
					border-color: tint($color, 10%);
					border-bottom-width: 4px;
					border-bottom-color: shade($color, 10%);
					background-color: tint($color, 10%);
					margin-top: -4px;
					outline: none;
				}

				&:active:not(:disabled),
				&.button--active:not(:disabled) {
					border-bottom-width: 1px;
					border-bottom-color: shade($color, 20%);
					background-color: shade($color, 20%);
					margin-top: 0;
					outline: none;
				}

			}

			&.button--outlined {
				color: $color;
				background-color: transparent;

				&:hover:not(:disabled),
				&.button--hovered:not(:disabled) {
					color: color-yiq($color);
					background-color: tint($color, 10%);
					border-color: tint($color, 10%);
				}

				
				&:focus:not(:disabled),
				&.button--focused:not(:disabled) {
					color: color-yiq($color);
					background-color: tint($color, 10%);
					border-color: tint($color, 10%);
					outline: none;
				}

				&:active:not(:disabled),
				&.button--active:not(:disabled) {
					color: color-yiq($color);
					background-color: shade($color, 20%);
					border-color: shade($color, 20%);
				}
			}
		}
	}

	//	Size modifier classes
	@each $size, $padding in $button-paddings {
		&--#{$size} {
			font-size: font-size($size);
			padding: $padding;
		}
	}

	//	Other modifiers
	&--clear {
		border: none;
		transition: $button-transition;
		color: $button-clear-text-color;

		&:hover:not(:disabled) {
			color: $button-clear-hovered-text-color;
			text-decoration: underline;
		}
	}

	&--pill {
		border-radius: $border-radius-pill;
	}

	&--full-width {
		width: 100%;
	}
}