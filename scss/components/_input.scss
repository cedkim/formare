$input-themes: $theme-colors;
$input-font-size: $font-size;
$input-font-sizes: $font-sizes;
$input-color: $dark;
$input-border: solid 1px gray(200);
$input-border-radius: border-radius(base);
$input-focused-color: primary-color(40);
$input-focused-border: solid 1px primary-color();
$input-padding-y: spacing(small) !default;
$input-padding-x: spacing(base) !default;
$input-padding: $input-padding-y $input-padding-x;
$input-background: $white;
$input-disabled-background: $lighter;
$input-transition: $transition;

$input-group-extra-color: color-yiq($lighter);
$input-group-extra-background: $lighter;
$input-group-extra-border: solid 1px $lighter;
$input-group-extra-border-radius: $border-radius;
$input-group-extra-focused-background: $primary-color;
$input-group-extra-focused-color: color-yiq($primary-color);
$input-group-extra-focused-border: solid 1px $primary-color;

.input,
.select > select {
	transition: $input-transition;
	font-size: $input-font-size;
	background-color: $input-background;
	color: $input-color;
	border: $input-border;
	border-radius: $input-border-radius;
	padding: $input-padding;
	outline: none;
	white-space: normal;
	width: 100%;

	&:focus {
		border: $input-focused-border;
	}

	&:disabled {
		background-color: $input-disabled-background;
		cursor: not-allowed;
	}

	@each $theme, $color in $input-themes {
		&--#{$theme} {
			border-color: tint($color, 20%);

			&:hover {
				border-color: tint($color, 10%);
			}

			&:focus {
				border: solid 1px $color;
			}
		}
	}

	@each $size, $value in $input-font-sizes {
		&--#{$size} {
			font-size: $value;
			padding: spacing($size);
		}
	}

	&--pill {
		border-radius: $border-radius-pill;
	}
}

.select {
	position: relative;
	
	> select {
		-webkit-appearance: none;
		-moz-appearance: none;
	}

	&:after {
		transition: $input-transition;
		content: "\f078";
		font-family: "Font Awesome 5 Free";
		font-weight: 900;
		position: absolute;
		right: spacing(base);
		top: 50%;
		transform: translateY(-50%);
		line-height: 0;
		color: gray(600);
	}

	&:focus-within {
		&:after {
			top: 50%;
			transform: rotate(180deg) translateY(-50%);
			color: primary-color();
		}
	}
}


// .input-group {
// 	display: flex;
// 	flex-direction: row;

// 	&__extra {
// 		transition: $input-transition;
// 		padding: $input-padding;
// 		background-color: $input-group-extra-background;
// 		color: $input-group-extra-color;
// 		border: $input-group-extra-border;
// 		border-radius: $input-group-extra-border-radius;
// 	}

// 	&:focus-within {
// 		.input-group__extra {
// 			background-color: $input-group-extra-focused-background;
// 			color: $input-group-extra-focused-color;
// 			border: $input-group-extra-focused-border;
// 		}
// 	}
	
// 	> *:first-child {
// 		border-top-right-radius: 0;
// 		border-bottom-right-radius: 0;
// 	}
	
// 	> *:last-child {
// 		border-top-left-radius: 0;
// 		border-bottom-left-radius: 0;
// 	}
// }

.input-set {
	display: flex;
	flex-direction: row;
	transition: $input-transition;
	border: $input-border;
	border-radius: $input-border-radius;
	background-color: $input-background;
	overflow: hidden;
	width: 100%;
	
	@each $theme, $color in $input-themes {
		&--#{$theme} {
			border-color: tint($color, 20%);

			&:hover {
				border-color: tint($color, 10%);
			}

			&:focus {
				border: solid 1px $color;
			}
		}
	}
	
	&__addon {
		display: flex;
		align-items: center;
		transition: $input-transition;
		background-color: gray(200);
		padding-left: spacing(base);
		padding-right: spacing(base);
		color: color-yiq(gray(200));
	}

	&__extra {
		display: flex;
		align-items: center;
		transition: $input-transition;
		padding-top: $input-padding-y;
		padding-bottom: $input-padding-y;

		> .icon {
			transition: $input-transition;
			color: gray(600);
		}

		&:first-child { padding-left: $input-padding-x; }
		&:last-child { padding-right: $input-padding-x; }
	}

	&:focus-within {
		border: $input-focused-border;

		.input-set {
			&__extra {
				> .icon {
					color: primary-color();
				}
			}

			&__addon {
				background-color: primary-color();
				color: color-yiq(primary-color());
			}
		}
	}

	&--pill {
		border-radius: $border-radius-pill;
	}

	&--disabled {
		position: relative;
		background-color: $input-disabled-background;
	}

	> .input,
	> .select {
		border: 0;
	}
}